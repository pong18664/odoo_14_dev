<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_stock_picking_form" model="ir.ui.view">
        <field name="name">stock.picking.form</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>    
        <field name="arch" type="xml">
            <xpath expr="//field[@name='origin']" position="after">
                <field name="check_state_srm" invisible="1"/>
            </xpath>
            <header>
                <button name="update_state" string="SRM State Draft" type="object" attrs="{'invisible': [('check_state_srm', '!=', 'state draft')]}"/>
                <button name="update_state" string="SRM State Waiting" type="object" attrs="{'invisible': [('check_state_srm', '!=', 'state waiting')]}"/>
                <button name="update_state" string="SRM State Ready" type="object" attrs="{'invisible': [('check_state_srm', '!=', 'state ready')]}"/>
            </header>
            <div>
                <button name="action_view_stock_picking" type="object" class="oe_stat_button" icon="fa-inbox" attrs="{'invisible': [('srm_count', '=', 0)]}">   
                    <field name="srm_count" string="SRM" widget="statinfo"/>
                </button>
            </div>  
            <xpath expr="//page[@name='operations']" position="before">
                <page string="Operations2" name="operations2" attrs="{'invisible':[('check_operation_type', '!=', 'incoming')]}">
                    <field name="check_operation_type" invisible="1"/>
                    <field name='move_line_ids_without_package' widget="one2many" mode="tree,kanban" >
                        <tree editable="bottom" >
                            <field name="company_id" invisible="1"/>
                            <field name="move_id" invisible="1"/>
                            <field name="picking_id" invisible="1"/>
                            <field name="product_uom_category_id" invisible="1"/>
                            <field name='reference'/>
                            <field name='product_id'  required="1"/>
                            <field name="lot_id" groups="stock.group_production_lot" attrs="{'column_invisible': [('parent.show_lots_text', '=', True)], 'invisible': [('lots_visible', '=', False)]}" context="{'default_product_id': product_id, 'default_company_id': company_id, 'active_picking_id': picking_id}" optional="show"/>
                            <field name="lot_name" groups="stock.group_production_lot" attrs="{'column_invisible': [('parent.show_lots_text', '=', False)], 'invisible': [('lots_visible', '=', False)]}" context="{'default_product_id': product_id}"/>
                            <field name="lots_visible" invisible="1"/>
                            <field name='product_uom_qty' string='Demand'/>
                            <field name='qty_done'/>
                            <field name='product_uom_id'/>
                            <field name="analytic_account_id" string="Analytic Account"/>
                            <field name="custom_location_id"/> 
                        </tree>
                    </field>
                </page>
            </xpath>
            <xpath expr="//field[@name='move_ids_without_package']/tree//field[@name='product_uom']" position="after">
                <field name="analytic_account_id" string="Analytic Account"/>
                <field name="location_ids" string="Location"/>
            </xpath>
            <xpath expr="//field[@name='location_dest_id']" position="after">
                <field name="analytic_account_id" attrs="{'invisible':[('check_operation_type', '!=', 'incoming')]}"/>
            </xpath>
            <xpath expr="//div[@class='oe_button_box']" position="inside">
                <button name="custom_action_to_tree_view_po" string="PO" type="object" icon="fa-inbox" attrs="{'invisible':[('count_po', '=', 0)]}">
                    <field name="count_po"/>
                </button>
            </xpath>
        </field>
    </record>


    <record id="view_picking_tree_inherit" model="ir.ui.view">
        <field name="name">stock.picking.tree.inherit</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.vpicktree"/>
        <field name="arch" type="xml">
            <field name="scheduled_date" position="attributes">
                <attribute name="widget">date</attribute>
            </field>
            <xpath expr="//field[@name='origin']" position="after">
                <field name="analytic_account_id" optional="show"/>
            </xpath>
        </field>
    </record>

</odoo>